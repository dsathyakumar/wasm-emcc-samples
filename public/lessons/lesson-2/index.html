<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Web Assembly Demo</title>
    </head>
    <body>
        <h1>Web Assembly Demo</h1>
        <script>
            WebAssembly.instantiateStreaming(fetch('/lessons/lesson-2/program.wasm'))
            .then(wasm => {
                console.log('WASM ready!!');
                // just assigning it to the global scope to inspect
                window.wasm = wasm;
                console.log(window.wasm);
                console.log(window.wasm.instance.exports.main());
                console.log(window.wasm.instance.exports.getNumber());
                console.log('viewing the exports on the module via WebAssembly.Module.exports');
                console.log(WebAssembly.Module.exports(wasm.module));
                console.log(window.wasm.instance.exports.getDoubleNumber(2));
            });
            
        </script>
    </body>
</html>